---
import Logo from '../core/Logo.astro';
---
<div id="boot-splash" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center transition-opacity duration-1000">
    <div class="relative w-32 h-32 flex items-center justify-center mb-12">
        <!-- Logo Glow -->
        <div class="absolute inset-0 bg-primary/20 blur-3xl rounded-full animate-pulse"></div>
        <!-- Logo -->
        <Logo class="w-24 h-24 animate-bounce-slight relative z-10" />
    </div>

    <!-- Spinner / Loader -->
    <div class="flex gap-3 mb-8">
        <div class="w-3 h-3 bg-primary rounded-full animate-bounce [animation-delay:-0.3s]"></div>
        <div class="w-3 h-3 bg-secondary rounded-full animate-bounce [animation-delay:-0.15s]"></div>
        <div class="w-3 h-3 bg-accent rounded-full animate-bounce"></div>
    </div>
    
    <!-- Text -->
    <div class="text-center font-mono space-y-2">
        <h1 class="text-2xl font-bold text-white tracking-widest">CAELESTIA</h1>
        <p class="text-subtext text-xs tracking-[0.2em] uppercase" id="boot-text">Initializing System...</p>
    </div>
</div>

<style>
    @keyframes bounce-slight {
        0%, 100% { transform: translateY(-5%); }
        50% { transform: translateY(5%); }
    }
    .animate-bounce-slight {
        animation: bounce-slight 3s infinite ease-in-out;
    }
</style>

<script is:inline>
    // Boot Sequence Logic
    document.addEventListener('DOMContentLoaded', () => {
        const splash = document.getElementById('boot-splash');
        const text = document.getElementById('boot-text');
        
        const steps = [
            "Loading Kernel...",
            "Mounting Filesystems...",
            "Starting Hyprland...",
            "Launching Quickshell...",
            "Welcome to Caelestia"
        ];

        let stepIndex = 0;
        
        // Simulate text updates
        const interval = setInterval(() => {
            if(text) text.innerText = steps[stepIndex];
            stepIndex++;
            if (stepIndex >= steps.length) clearInterval(interval);
        }, 400);

        // Dismiss Splash
        setTimeout(() => {
            splash.classList.add('opacity-0');
            splash.style.pointerEvents = 'none';
            // Remove from DOM after transition to free resources
            setTimeout(() => {
                splash.style.display = 'none';
            }, 1000);
        }, 2500);
    });
</script>
