---
import ThemeManager from '../components/core/ThemeManager.astro';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Caelestia Dots - The Ultimate Linux Rice" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/logo.svg" />
		<meta name="generator" content={Astro.generator} />
        
        <!-- Fonts: Rubik -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">

		<title>{title}</title>
        <ThemeManager />
	</head>
	<body class="text-white h-screen font-sans selection:bg-primary/30 selection:text-white overflow-hidden bg-background">
		<slot />
	</body>
</html>

<style is:global>
	:root {
		/* Dark Theme (Default) - Caelestia/Mocha */
		--color-background: 11 12 16;
		--color-surface: 22 22 33;
		--color-overlay: 30 30 46;

		--color-primary: 139 92 246;
		--color-secondary: 196 181 253;
		--color-accent: 45 212 191;

		--color-success: 166 218 149;
		--color-warning: 238 212 159;
		--color-error: 237 135 150;

		--color-muted: 166 173 200;
		--color-subtext: 186 194 222;
		--color-text: 205 214 244;
	}

	html.light {
		/* Light Theme - Latte-inspired (Modified for Contrast) */
		--color-background: 239 241 245;    /* #eff1f5 */
		--color-surface: 255 255 255;       /* #ffffff (Pure White for Windows) */
		--color-overlay: 204 208 218;       /* #ccd0da */

		--color-primary: 136 57 239;
		--color-secondary: 114 135 253;
		--color-accent: 23 146 153;

		--color-success: 64 160 43;
		--color-warning: 223 142 29;
		--color-error: 210 15 57;

		--color-muted: 108 111 133;
		--color-subtext: 92 95 119;
		--color-text: 76 79 105;
	}

    html.cyan {
        /* Official Caelestia Cyan Theme */
        --color-background: 11 12 16;
        --color-surface: 22 22 33;
        --color-overlay: 30 30 46;

        --color-primary: 106 229 225; /* #6ae5e1 (Logo Cyan) */
        --color-secondary: 59 70 86;  /* #3b4656 (Logo Dark Grey) */
        --color-accent: 139 92 246;   /* Purple as accent */

        --color-success: 166 218 149;
        --color-warning: 238 212 159;
        --color-error: 237 135 150;

        --color-muted: 166 173 200;
        --color-subtext: 186 194 222;
        --color-text: 205 214 244;
    }

    /* --- Material Variants --- */
    
    html.variant-vibrant {
        --color-primary: 0 255 200;   /* High Chroma Cyan */
        --color-secondary: 255 0 128; /* High Chroma Magenta */
        --color-accent: 255 255 0;    /* High Chroma Yellow */
    }
    
    html.variant-tonal {
        --color-primary: 165 180 252;   /* Pastel Blue */
        --color-secondary: 203 213 225; /* Pastel Grey */
        --color-accent: 148 163 184;    /* Muted Slate */
    }

    html.variant-expressive {
        --color-primary: 244 114 182;   /* Pink */
        --color-secondary: 167 139 250; /* Purple */
        --color-accent: 251 146 60;     /* Orange */
    }

    html.variant-fruit-salad {
        --color-primary: 251 146 60;    /* Orange */
        --color-secondary: 132 204 22;  /* Lime */
        --color-accent: 239 68 68;      /* Red */
    }

    /* Official Caelestia Theme (From QML) */
    html.official {
        --color-background: 25 17 20;       /* m3background #191114 */
        --color-surface: 38 29 32;          /* m3surfaceContainer #261d20 */
        --color-overlay: 49 40 42;          /* m3surfaceContainerHigh #31282a */
        
        --color-text: 239 223 226;          /* m3onBackground #efdfe2 */
        --color-subtext: 213 194 198;       /* m3onSurfaceVariant #d5c2c6 */
        --color-muted: 81 67 71;            /* m3surfaceVariant #514347 */

        --color-primary: 255 176 202;       /* m3primary #ffb0ca */
        --color-secondary: 226 189 199;     /* m3secondary #e2bdc7 */
        --color-accent: 240 188 149;        /* m3tertiary #f0bc95 */
        
        --color-success: 181 204 186;       /* m3success #B5CCBA */
        --color-warning: 255 218 195;       /* m3tertiaryFixed #ffdcc3 (approx) */
        --color-error: 255 180 171;         /* m3error #ffb4ab */
    }

    html.variant-rainbow {
        --color-primary: 250 204 21;    /* Yellow */
        --color-secondary: 56 189 248;  /* Sky */
        --color-accent: 168 85 247;     /* Violet */
    }

    html.variant-neutral {
        --color-primary: 161 161 170;   /* Zinc 400 */
        --color-secondary: 113 113 122; /* Zinc 500 */
        --color-accent: 212 212 216;    /* Zinc 200 */
    }

    html.variant-monochrome {
        --color-primary: 255 255 255;   /* White */
        --color-secondary: 128 128 128; /* Grey */
        --color-accent: 200 200 200;    /* Light Grey */
        --color-success: 200 200 200;   /* Desaturated */
        --color-warning: 200 200 200;
        --color-error: 200 200 200;
    }

    /* --- Imported Schemes (Caelestia CLI) --- */

    html.scheme-catppuccin-frappe-dark {
        --color-background: 19 19 23;
        --color-surface: 32 31 35;
        --color-overlay: 43 41 46;
        --color-text: 229 225 231;
        --color-subtext: 200 197 209;
        --color-muted: 145 143 154;
        --color-primary: 183 196 255;
        --color-secondary: 198 196 224;
        --color-accent: 245 178 224;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-catppuccin-latte-light {
        --color-background: 239 241 245;
        --color-surface: 220 224 232;
        --color-overlay: 204 208 218;
        --color-text: 76 79 105;
        --color-subtext: 92 95 119;
        --color-muted: 108 111 133;
        --color-primary: 30 102 245;
        --color-secondary: 136 57 239;
        --color-accent: 23 146 153;
        --color-success: 64 160 43;
        --color-warning: 223 142 29;
        --color-error: 210 15 57;
    }

    html.scheme-catppuccin-macchiato-dark {
        --color-background: 19 19 23;
        --color-surface: 32 31 35;
        --color-overlay: 43 41 46;
        --color-text: 229 225 231;
        --color-subtext: 200 197 209;
        --color-muted: 145 143 154;
        --color-primary: 186 195 255;
        --color-secondary: 199 196 224;
        --color-accent: 245 178 224;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-catppuccin-mocha-dark {
        --color-background: 19 19 23;
        --color-surface: 32 31 35;
        --color-overlay: 42 41 46;
        --color-text: 229 225 231;
        --color-subtext: 200 197 209;
        --color-muted: 145 143 154;
        --color-primary: 194 193 255;
        --color-secondary: 198 196 224;
        --color-accent: 245 178 224;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-darkgreen-hard-dark {
        --color-background: 18 20 19;
        --color-surface: 29 32 30;
        --color-overlay: 40 43 41;
        --color-text: 226 227 225;
        --color-subtext: 136 146 150;
        --color-muted: 83 90 93;
        --color-primary: 36 189 92;
        --color-secondary: 36 189 92;
        --color-accent: 50 101 62;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 198 110 115;
    }

    html.scheme-darkgreen-medium-dark {
        --color-background: 18 20 19;
        --color-surface: 29 32 30;
        --color-overlay: 40 43 41;
        --color-text: 226 227 225;
        --color-subtext: 136 146 150;
        --color-muted: 83 90 93;
        --color-primary: 36 189 92;
        --color-secondary: 36 189 92;
        --color-accent: 50 101 62;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 198 110 115;
    }

    html.scheme-gruvbox-hard-dark {
        --color-background: 16 20 21;
        --color-surface: 28 32 33;
        --color-overlay: 39 43 44;
        --color-text: 224 227 228;
        --color-subtext: 136 146 150;
        --color-muted: 83 90 93;
        --color-primary: 133 210 231;
        --color-secondary: 174 203 212;
        --color-accent: 225 183 245;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-gruvbox-hard-light {
        --color-background: 253 249 239;
        --color-surface: 242 238 228;
        --color-overlay: 236 232 222;
        --color-text: 28 28 22;
        --color-subtext: 119 117 101;
        --color-muted: 171 168 154;
        --color-primary: 99 97 22;
        --color-secondary: 98 96 62;
        --color-accent: 84 127 74;
        --color-success: 79 99 84;
        --color-warning: 255 220 195;
        --color-error: 186 26 26;
    }

    html.scheme-gruvbox-medium-dark {
        --color-background: 16 20 21;
        --color-surface: 28 32 33;
        --color-overlay: 39 43 43;
        --color-text: 224 227 228;
        --color-subtext: 136 147 148;
        --color-muted: 83 91 92;
        --color-primary: 129 211 224;
        --color-secondary: 173 204 209;
        --color-accent: 221 185 247;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-gruvbox-medium-light {
        --color-background: 254 249 238;
        --color-surface: 243 237 227;
        --color-overlay: 237 232 221;
        --color-text: 29 28 21;
        --color-subtext: 121 117 100;
        --color-muted: 173 168 153;
        --color-primary: 107 95 16;
        --color-secondary: 101 95 60;
        --color-accent: 92 126 67;
        --color-success: 79 99 84;
        --color-warning: 255 220 195;
        --color-error: 186 26 26;
    }

    html.scheme-gruvbox-soft-dark {
        --color-background: 24 18 14;
        --color-surface: 36 30 26;
        --color-overlay: 47 41 36;
        --color-text: 236 224 217;
        --color-subtext: 159 142 129;
        --color-muted: 99 87 78;
        --color-primary: 255 184 120;
        --color-secondary: 229 191 161;
        --color-accent: 198 204 122;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-gruvbox-soft-light {
        --color-background: 255 249 238;
        --color-surface: 243 237 227;
        --color-overlay: 238 231 221;
        --color-text: 29 27 21;
        --color-subtext: 122 116 100;
        --color-muted: 174 168 153;
        --color-primary: 134 116 37;
        --color-secondary: 103 94 60;
        --color-accent: 95 125 65;
        --color-success: 79 99 84;
        --color-warning: 255 220 195;
        --color-error: 186 26 26;
    }

    html.scheme-oldworld-default-dark {
        --color-background: 18 19 23;
        --color-surface: 30 32 35;
        --color-overlay: 41 42 46;
        --color-text: 227 226 231;
        --color-subtext: 142 144 154;
        --color-muted: 87 89 96;
        --color-primary: 170 199 255;
        --color-secondary: 188 199 223;
        --color-accent: 236 180 237;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-onedark-default-dark {
        --color-background: 18 19 23;
        --color-surface: 30 32 35;
        --color-overlay: 41 42 45;
        --color-text: 227 226 231;
        --color-subtext: 141 145 154;
        --color-muted: 87 89 96;
        --color-primary: 168 200 255;
        --color-secondary: 187 199 223;
        --color-accent: 235 181 236;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-rosepine-dawn-light {
        --color-background: 255 248 240;
        --color-surface: 244 237 227;
        --color-overlay: 238 231 221;
        --color-text: 30 27 21;
        --color-subtext: 123 116 100;
        --color-muted: 174 167 154;
        --color-primary: 137 115 36;
        --color-secondary: 105 94 59;
        --color-accent: 100 125 62;
        --color-success: 79 99 84;
        --color-warning: 255 220 195;
        --color-error: 186 26 26;
    }

    html.scheme-rosepine-main-dark {
        --color-background: 20 19 23;
        --color-surface: 32 31 35;
        --color-overlay: 43 41 46;
        --color-text: 229 225 231;
        --color-subtext: 147 143 154;
        --color-muted: 91 88 96;
        --color-primary: 201 191 255;
        --color-secondary: 201 195 224;
        --color-accent: 249 177 220;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-rosepine-moon-dark {
        --color-background: 20 19 23;
        --color-surface: 32 31 35;
        --color-overlay: 42 41 46;
        --color-text: 229 225 231;
        --color-subtext: 146 143 154;
        --color-muted: 90 88 96;
        --color-primary: 198 191 255;
        --color-secondary: 200 195 224;
        --color-accent: 249 177 221;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    html.scheme-shadotheme-default-dark {
        --color-background: 19 19 23;
        --color-surface: 31 31 35;
        --color-overlay: 42 41 46;
        --color-text: 229 225 231;
        --color-subtext: 145 143 154;
        --color-muted: 89 88 96;
        --color-primary: 191 193 255;
        --color-secondary: 197 196 224;
        --color-accent: 244 178 226;
        --color-success: 181 204 186;
        --color-warning: 255 220 195;
        --color-error: 255 180 171;
    }

    /* --- New Added Themes --- */

    html.scheme-dracula-dark {
        --color-background: 40 42 54;
        --color-surface: 68 71 90;
        --color-overlay: 98 114 164;
        --color-text: 248 248 242;
        --color-subtext: 189 147 249;
        --color-muted: 98 114 164;
        
        --color-primary: 255 121 198;
        --color-secondary: 189 147 249;
        --color-accent: 255 184 108;
        
        --color-success: 80 250 123;
        --color-warning: 241 250 140;
        --color-error: 255 85 85;
    }

    html.scheme-nord-dark {
        --color-background: 46 52 64;
        --color-surface: 59 66 82;
        --color-overlay: 67 76 94;
        --color-text: 236 239 244;
        --color-subtext: 216 222 233;
        --color-muted: 76 86 106;
        
        --color-primary: 136 192 208;
        --color-secondary: 129 161 193;
        --color-accent: 94 129 172;
        
        --color-success: 163 190 140;
        --color-warning: 235 203 139;
        --color-error: 191 97 106;
    }

    html.scheme-tokyo-night-dark {
        --color-background: 26 27 38;
        --color-surface: 36 40 59;
        --color-overlay: 65 72 104;
        --color-text: 192 202 245;
        --color-subtext: 169 177 214;
        --color-muted: 86 95 137;
        
        --color-primary: 122 162 247;
        --color-secondary: 187 154 247;
        --color-accent: 125 207 255;
        
        --color-success: 158 206 106;
        --color-warning: 224 175 104;
        --color-error: 247 118 142;
    }

    html.scheme-cyberpunk-dark {
        --color-background: 8 4 33;     /* Deep Blue/Void */
        --color-surface: 26 23 48;      /* Panel BG */
        --color-overlay: 56 46 89;
        --color-text: 255 240 31;       /* Cyber Yellow */
        --color-subtext: 45 226 230;    /* Cyan */
        --color-muted: 105 105 105;
        
        --color-primary: 255 0 153;     /* Neon Pink */
        --color-secondary: 110 0 255;   /* Electric Violet */
        --color-accent: 0 255 159;      /* Neon Green */
        
        --color-success: 57 255 20;     /* Terminal Green */
        --color-warning: 255 240 31;    /* Yellow */
        --color-error: 255 42 109;      /* Radical Red */
    }

    html.scheme-synthwave84-dark {
        --color-background: 38 35 53;   /* Deep Purple */
        --color-surface: 49 46 72;      /* Lighter Purple */
        --color-overlay: 68 65 90;
        --color-text: 255 255 255;      /* White */
        --color-subtext: 45 226 230;    /* Cyan Glow */
        --color-muted: 132 143 176;
        
        --color-primary: 255 113 206;   /* Hot Pink */
        --color-secondary: 1 205 254;   /* Neon Blue */
        --color-accent: 5 255 161;      /* Neon Green */
        
        --color-success: 57 255 20;
        --color-warning: 255 240 31;
        --color-error: 255 65 81;
    }

	html {
        font-family: 'Rubik', sans-serif;
        color: rgb(var(--color-text));
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
	}
	code, pre {
		font-family: 'CaskaydiaCove NF', monospace;
	}

    /* Global Selection Color */
    ::selection {
        background: rgb(var(--color-primary) / 0.3);
        color: white;
    }

    /* Global Scrollbar */
    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    ::-webkit-scrollbar-thumb {
        background: rgb(255 255 255 / 0.1);
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: rgb(255 255 255 / 0.2);
    }
    ::-webkit-scrollbar-corner {
        background: transparent;
    }
</style>
